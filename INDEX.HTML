<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSR Word Puzzle Game | Time Pass</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <style>
        :root {
            --primary: #ff6f61;
            --secondary: #feb47b;
            --success: #28a745;
            --danger: #d9534f;
            --warning: #ff9800;
            --bg: #fffaf0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Arial', sans-serif;
            color: #333;
            padding: 20px;
            overflow: hidden;
            position: relative;
        }

        canvas#confetti {
            position: fixed;
            top: 0; left: 0;
            pointer-events: none;
            z-index: 1000;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.25);
            text-align: center;
            max-width: 500px;
            width: 100%;
            position: relative;
            animation: fadeIn 0.8s ease-out;
            border: 4px solid var(--primary);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: var(--primary);
            font-size: 2.4rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.15);
        }

        .instructions {
            font-size: 1.05rem;
            color: #444;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 12px;
            border-radius: 12px;
            border: 1px dashed #ccc;
        }

        .difficulty-selector {
            margin-bottom: 25px;
        }

        .difficulty-selector select {
            padding: 12px 18px;
            font-size: 1.1rem;
            border: 3px solid var(--primary);
            border-radius: 12px;
            background: white;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s;
        }

        .difficulty-selector select:hover {
            background: #fff5f2;
            transform: scale(1.03);
        }

        .puzzle {
            font-size: 2.5rem;
            letter-spacing: 10px;
            font-weight: bold;
            color: #333;
            margin: 30px 0;
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid var(--secondary);
            transition: all 0.4s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .puzzle:hover {
            transform: scale(1.03);
            border-color: var(--primary);
        }

        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 20px 0;
            color: var(--danger);
            transition: color 0.3s;
        }

        .timer.low {
            color: #f44336;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-bottom: 20px;
        }

        input {
            flex: 1;
            min-width: 180px;
            padding: 14px;
            font-size: 1.3rem;
            border: 3px solid var(--primary);
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s;
        }

        input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 4px rgba(254,180,123,0.4);
        }

        button {
            padding: 14px 30px;
            font-size: 1.1rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--success), #2e7d32);
            color: white;
        }

        .submit-btn:hover { transform: translateY(-3px); }

        .hint-btn {
            background: linear-gradient(135deg, var(--warning), #ef6c00);
            color: white;
        }

        .hint-btn:hover { transform: translateY(-3px); }

        .reset-btn {
            background: linear-gradient(135deg, var(--danger), #c62828);
            color: white;
            margin-top: 15px;
        }

        .reset-btn:hover { transform: translateY(-3px); }

        #message {
            font-size: 1.4rem;
            font-weight: bold;
            min-height: 40px;
            margin: 20px 0;
        }

        .correct {
            color: var(--success);
            animation: pop 0.6s ease-out;
        }

        .incorrect {
            color: var(--danger);
            animation: shake 0.5s ease-out;
        }

        #score-board {
            font-size: 1.3rem;
            background: #fff;
            padding: 15px;
            border-radius: 12px;
            border: 2px dashed var(--primary);
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        .score-pop {
            position: absolute;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--success);
            pointer-events: none;
            animation: floatUp 1.2s ease-out forwards;
        }

        @keyframes floatUp {
            0% { opacity: 0; transform: translateY(0); }
            20% { opacity: 1; transform: translateY(-20px); }
            100% { opacity: 0; transform: translateY(-60px); }
        }

        @media (max-width: 480px) {
            h1 { font-size: 1.8rem; }
            .puzzle { font-size: 2rem; letter-spacing: 6px; }
            input { width: 100%; }
        }
    </style>
</head>
<body>
    <canvas id="confetti"></canvas>

    <div class="game-container">
        <h1>JSR Word Puzzle Game</h1>
        <div class="instructions">
            Unscramble the letters! <br>
            <strong>Time varies by difficulty • Hints cost 10 points</strong>
        </div>

        <div class="difficulty-selector">
            <label for="difficulty">Difficulty:</label>
            <select id="difficulty" onchange="changeDifficulty()">
                <option value="easy">Easy (3–5 letters)</option>
                <option value="medium" selected>Medium (6–7 letters)</option>
                <option value="hard">Hard (8+ letters)</option>
            </select>
        </div>

        <div class="puzzle" id="puzzle"></div>
        <div class="timer" id="timer">Time Left: 30s</div>
        <div class="input-group">
            <input type="text" id="guessInput" placeholder="Type your answer">
            <button class="submit-btn" onclick="checkGuess()">Submit</button>
        </div>
        <button class="hint-btn" onclick="getHint()" id="hintBtn">Hint (-10 pts)</button>
        <div id="message"></div>
        <div id="score-board">Score: 0 | High Score: 0</div>
        <button class="reset-btn" onclick="resetGame()">New Puzzle</button>
    </div>

    <!-- Audio -->
    <audio id="correctSound" src="https://www.soundjay.com/buttons/beep-01a.mp3"></audio>
    <audio id="wrongSound" src="https://www.soundjay.com/buttons/beep-02.mp3"></audio>
    <audio id="newPuzzleSound" src="https://www.soundjay.com/buttons/beep-04.mp3"></audio>
    <audio id="timeUpSound" src="https://www.soundjay.com/buttons/beep-03.mp3"></audio>
    <audio id="hintSound" src="https://www.soundjay.com/buttons/beep-05.mp3"></audio>

    <script>
        // Confetti Canvas
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        function createConfetti() {
            const colors = ['#ff6f61', '#feb47b', '#28a745', '#d9534f', '#ff9800'];
            const particles = [];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    r: Math.random() * 6 + 2,
                    d: Math.random() * 100 + 50,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    tilt: Math.random() * 10 - 5,
                    tiltAngle: 0
                });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    ctx.beginPath();
                    ctx.lineWidth = p.r;
                    ctx.strokeStyle = p.color;
                    ctx.moveTo(p.x + p.tilt + p.r / 2, p.y);
                    ctx.lineTo(p.x + p.tilt - p.r / 2, p.y + p.tilt + p.r);
                    ctx.stroke();
                    p.tiltAngle += 0.1;
                    p.tilt = Math.sin(p.tiltAngle) * 15;
                    p.y += (Math.cos(p.tiltAngle) + 1) * 1.5;
                    if (p.y > canvas.height) p.y = -10;
                });
                requestAnimationFrame(draw);
            }

            draw();
        }

        // Word List
        const wordList = {
            easy: [
                { original: "CAT", jumbled: "ACT" },
                { original: "DOG", jumbled: "GOD" },
                { original: "SUN", jumbled: "NUS" },
                { original: "RUN", jumbled: "URN" },
                { original: "BOOK", jumbled: "KOOB" },
                { original: "FISH", jumbled: "HSIF" },
                { original: "BIRD", jumbled: "DRIB" },
                { original: "LOVE", jumbled: "EVOL" },
                { original: "HOME", jumbled: "EMOH" },
                { original: "STAR", jumbled: "RATS" }
            ],
            medium: [
                { original: "APPLE", jumbled: "PLEAP" },
                { original: "HOUSE", jumbled: "UOHSE" },
                { original: "TABLE", jumbled: "BTLAE" },
                { original: "CHAIR", jumbled: "CHIRA" },
                { original: "RIVER", jumbled: "RVIER" },
                { original: "BREAD", jumbled: "ARDEB" },
                { original: "MOUSE", jumbled: "OUSME" },
                { original: "TRAIN", jumbled: "NITAR" },
                { original: "GARDEN", jumbled: "GNDARE" },
                { original: "FLOWER", jumbled: "FLEWOR" }
            ],
            hard: [
                { original: "MOUNTAIN", jumbled: "NMAITOUN" },
                { original: "COMPUTER", jumbled: "MOPUTERC" },
                { original: "ELEPHANT", jumbled: "HAPELNET" },
                { original: "BUTTERFLY", jumbled: "FLYUTBRET" },
                { original: "CROCODILE", jumbled: "CLODIREOC" },
                { original: "PICTURE", jumbled: "TUREPIC" },
                { original: "ADVENTURE", jumbled: "DVANTERUE" },
                { original: "MAGICIAN", jumbled: "MAGICIAN" },
                { original: "HOSPITAL", jumbled: "HOSPTILA" },
                { original: "UNIVERSITY", jumbled: "UNIVESRITY" }
            ]
        };

        let currentDifficulty = "medium";
        let currentWord;
        let score = 0;
        let highScore = localStorage.getItem('highScore') ? parseInt(localStorage.getItem('highScore')) : 0;
        let timeLeft = 30;
        let timerInterval;
        let hintUsed = false;

        const correctSound = document.getElementById('correctSound');
        const wrongSound = document.getElementById('wrongSound');
        const newPuzzleSound = document.getElementById('newPuzzleSound');
        const timeUpSound = document.getElementById('timeUpSound');
        const hintSound = document.getElementById('hintSound');

        function getRandomWord(difficulty) {
            const words = wordList[difficulty];
            return words[Math.floor(Math.random() * words.length)];
        }

        function getTimerDuration() {
            return currentDifficulty === "easy" ? 45 : currentDifficulty === "medium" ? 30 : 20;
        }

        function updatePuzzle() {
            clearInterval(timerInterval);
            hintUsed = false;
            timeLeft = getTimerDuration();
            document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
            document.getElementById('timer').classList.remove('low');
            document.getElementById('puzzle').textContent = currentWord.jumbled;
            document.getElementById('guessInput').value = '';
            document.getElementById('message').textContent = '';
            document.getElementById('message').className = '';
            document.getElementById('hintBtn').disabled = false;
            document.getElementById('hintBtn').textContent = "Hint (-10 pts)";
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
                if (timeLeft <= 10) document.getElementById('timer').classList.add('low');
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endPuzzleDueToTime();
                }
            }, 1000);
        }

        function endPuzzleDueToTime() {
            document.getElementById('message').textContent = `Time's up! It was ${currentWord.original}`;
            document.getElementById('message').className = 'incorrect';
            playSound(timeUpSound);
            document.getElementById('guessInput').disabled = true;
            document.getElementById('hintBtn').disabled = true;
            setTimeout(resetGame, 2500);
        }

        function updateScoreBoard() {
            document.getElementById('score-board').textContent = `Score: ${score} | High Score: ${highScore}`;
        }

        function playSound(sound) {
            sound.currentTime = 0;
            sound.play().catch(() => {});
        }

        function showScorePop(text, color) {
            const pop = document.createElement('div');
            pop.className = 'score-pop';
            pop.textContent = text;
            pop.style.color = color;
            pop.style.left = `${Math.random() * 80 + 10}%`;
            pop.style.top = '40%';
            document.body.appendChild(pop);
            setTimeout(() => pop.remove(), 1200);
        }

        function checkGuess() {
            const guess = document.getElementById('guessInput').value.toUpperCase().trim();
            const message = document.getElementById('message');

            if (!guess) {
                message.textContent = "Enter a word!";
                playSound(wrongSound);
                return;
            }

            if (guess === currentWord.original) {
                clearInterval(timerInterval);
                message.textContent = "Correct! +20 points";
                message.className = 'correct';
                const points = 20 + Math.floor(timeLeft / 5);
                score += points;
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('highScore', highScore);
                }
                showScorePop(`+${points}`, '#28a745');
                playSound(correctSound);
                createConfetti(); // Trigger confetti
                setTimeout(() => {
                    currentWord = getRandomWord(currentDifficulty);
                    updatePuzzle();
                    playSound(newPuzzleSound);
                }, 1500);
            } else {
                message.textContent = "Wrong! Try again.";
                message.className = 'incorrect';
                playSound(wrongSound);
            }

            updateScoreBoard();
        }

        function getHint() {
            if (hintUsed) {
                document.getElementById('message').textContent = "You've already used your hint!";
                return;
            }
            if (score < 10) {
                document.getElementById('message').textContent = "Need 10 points for a hint!";
                playSound(wrongSound);
                return;
            }
            score -= 10;
            hintUsed = true;
            const hint = currentWord.original.charAt(0) + " _ _ _ ".repeat(currentWord.original.length - 1);
            document.getElementById('message').textContent = `Hint: ${hint}`;
            document.getElementById('hintBtn').disabled = true;
            playSound(hintSound);
            updateScoreBoard();
        }

        function resetGame() {
            score = 0;
            currentWord = getRandomWord(currentDifficulty);
            updatePuzzle();
            updateScoreBoard();
            document.getElementById('guessInput').disabled = false;
            document.querySelector('button[onclick="checkGuess()"]').disabled = false;
            playSound(newPuzzleSound);
        }

        function changeDifficulty() {
            currentDifficulty = document.getElementById('difficulty').value;
            resetGame();
        }

        // Initialize
        currentWord = getRandomWord(currentDifficulty);
        updatePuzzle();
        updateScoreBoard();
    </script>
</body>
</html>